from models.model import User, InstaLikeeTik, Pin

user = User('users')
insta = InstaLikeeTik('instagram')
tiktok = InstaLikeeTik('tiktok')
likee = InstaLikeeTik('likee')
pin = Pin('pinterest')


def user_create(msg):
    try:
        telegram_id = msg.from_user.id
        username = msg.from_user.username
        first_name = msg.from_user.first_name
        if user.get_user(telegram_id):
            return user
        else:
            return user.create_user(telegram_id=telegram_id, username=username, first_name=first_name)
    except:
        return None


def all_users():
    try:
        data = user.get_medias()
        return data
    except:
        return None


def user_statistic():
    data = user.statistika()
    return (f"ğ€ğğ¦ğ¢ğ§ ğ®ğœğ¡ğ®ğ§ ğ®ğ¬ğğ«ğ¥ğšğ« ğ’ğ­ğšğ­ğ¢ğ¬ğ­ğ¢ğ¤ğšğ¬ğ¢ ğŸ¤–ğŸ“‚\n\n"
            f"Ê™á´œ á´Êá´…á´€ á´Šá´€á´Éª Ç«á´'sÊœÉªÊŸÉ¢á´€É´ á´œsá´‡Ê€ÊŸá´€Ê€ sá´É´Éª: {len(data['month'])}\n"
            f"Ê™á´œ Êœá´€êœ°á´›á´€ á´Šá´€á´Éª Ç«á´'sÊœÉªÊŸÉ¢á´€É´ á´œsá´‡Ê€ÊŸá´€Ê€ sá´É´Éª: {len(data['week'])}\n"
            f"Ê™á´œÉ¢á´œÉ´ á´Šá´€á´Éª Ç«á´'sÊœÉªÊŸÉ¢á´€É´ á´œsá´‡Ê€ÊŸá´€Ê€ sá´É´Éª: {len(data['day'])}\n\n"
            f"Ê€á´'ÊÊœá´€á´›É¢á´€ á´ÊŸÉªÉ´É¢á´€É´ Ê™á´€Ê€á´„Êœá´€ á´œsá´‡Ê€ÊŸá´€Ê€ sá´É´Éª: {len(all_users())}\n\n"
            f"ğ—¨ğ˜€ğ—²ğ—¿ğ—¹ğ—®ğ—¿ğ—»ğ—¶ ğ—¾ğ—¶ğ—±ğ—¶ğ—¿ğ—¶ğ˜€ğ—µ ğ˜‚ğ—°ğ—µğ˜‚ğ—» ğŸ‘¤ Find User ğ—™ğ˜‚ğ—»ğ—¸ğ˜€ğ—¶ğ˜†ğ—®ğ˜€ğ—¶ğ—±ğ—®ğ—» ğ—³ğ—¼ğ˜†ğ—±ğ—®ğ—¹ğ—®ğ—»ğ—¶ğ—»ğ—´ ğŸ”")


def media_statistic():
    insta_stat = insta.statistika()
    tiktok_stat = tiktok.statistika()
    likee_stat = likee.statistika()
    pin_stat = pin.statistika()

    return (f"ğ€ğğ¦ğ¢ğ§ ğ®ğœğ¡ğ®ğ§ ğ¦ğğğ¢ğšğ¥ğšğ« ğ’ğ­ğšğ­ğ¢ğ¬ğ­ğ¢ğ¤ğšğ¬ğ¢ ğŸ¤–ğŸ“‚\n\n"
            f"ğ—•ğ˜‚ ğ—¼ğ˜†ğ—±ğ—® ğ—œğ—»ğ˜€ğ˜ğ—®ğ—´ğ—¿ğ—®ğ—º ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(insta_stat['month'])}\n"
            f"ğ—•ğ˜‚ ğ—µğ—®ğ—³ğ˜ğ—® ğ—œğ—»ğ˜€ğ˜ğ—®ğ—´ğ—¿ğ—®ğ—º ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(insta_stat['week'])}\n"
            f"ğ—•ğ˜‚ğ—´ğ˜‚ğ—» ğ—œğ—»ğ˜€ğ˜ğ—®ğ—´ğ—¿ğ—®ğ—º ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(insta_stat['day'])}\n"
            f"ğ—œğ—»ğ˜€ğ˜ğ—®ğ—´ğ—¿ğ—®ğ—º ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ—·ğ—®ğ—ºğ—¶ ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(insta.get_medias())}\n\n"
            f"ğ—•ğ˜‚ ğ—¼ğ˜†ğ—±ğ—® ğ—§ğ—¶ğ—¸ğ—§ğ—¼ğ—¸ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(tiktok_stat['month'])}\n"
            f"ğ—•ğ˜‚ ğ—µğ—®ğ—³ğ˜ğ—® ğ—§ğ—¶ğ—¸ğ—§ğ—¼ğ—¸ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(tiktok_stat['week'])}\n"
            f"ğ—•ğ˜‚ğ—´ğ˜‚ğ—» ğ—§ğ—¶ğ—¸ğ—§ğ—¼ğ—¸ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(tiktok_stat['day'])}\n"
            f"ğ—§ğ—¶ğ—¸ğ—§ğ—¼ğ—¸ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ—·ğ—®ğ—ºğ—¶ ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(tiktok.get_medias())}\n\n"
            f"ğ—•ğ˜‚ ğ—¼ğ˜†ğ—±ğ—® ğ—Ÿğ—¶ğ—¸ğ—²ğ—² ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(likee_stat['month'])}\n"
            f"ğ—•ğ˜‚ ğ—µğ—®ğ—³ğ˜ğ—® ğ—Ÿğ—¶ğ—¸ğ—²ğ—² ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(likee_stat['week'])}\n"
            f"ğ—•ğ˜‚ğ—´ğ˜‚ğ—» ğ—Ÿğ—¶ğ—¸ğ—²ğ—² ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(likee_stat['day'])}\n"
            f"ğ—Ÿğ—¶ğ—¸ğ—²ğ—² ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ—·ğ—®ğ—ºğ—¶ ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(likee.get_medias())}\n\n"
            f"ğ—•ğ˜‚ ğ—¼ğ˜†ğ—±ğ—® ğ—£ğ—¶ğ—»ğ˜ğ—²ğ—¿ğ—²ğ˜€ğ˜ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(pin_stat['month'])}\n"
            f"ğ—•ğ˜‚ ğ—µğ—®ğ—³ğ˜ğ—® ğ—£ğ—¶ğ—»ğ˜ğ—²ğ—¿ğ—²ğ˜€ğ˜ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(pin_stat['week'])}\n"
            f"ğ—•ğ˜‚ğ—´ğ˜‚ğ—» ğ—£ğ—¶ğ—»ğ˜ğ—²ğ—¿ğ—²ğ˜€ğ˜ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(pin_stat['day'])}\n"
            f"ğ—£ğ—¶ğ—»ğ˜ğ—²ğ—¿ğ—²ğ˜€ğ˜ ğ˜ğ—®ğ—¿ğ—ºğ—¼ğ—´'ğ—¶ğ—±ğ—®ğ—» ğ—·ğ—®ğ—ºğ—¶ ğ˜†ğ˜‚ğ—¸ğ—¹ğ—®ğ—¯ ğ—¼ğ—¹ğ—¶ğ—»ğ—´ğ—®ğ—» ğ—ºğ—²ğ—±ğ—¶ğ—®ğ—¹ğ—®ğ—¿ ğ˜€ğ—¼ğ—»ğ—¶: {len(pin.get_medias())}\n\n")


def find_user(msg):
    if msg.isdigit():
        user_data = user.get_user(msg)
        if user_data:
            return (f"ğ”ğ¬ğğ« ğ¦ğš'ğ¥ğ®ğ¦ğ¨ğ­ğ¥ğšğ«ğ¢: ğŸ—‚\n\n"
                    f"Éªá´…: {user_data['telegram_id']}\n"
                    f"Éªsá´: {user_data['first_name']}\n"
                    f"á´œsá´‡Ê€É´á´€á´á´‡: {'@' + user_data['username'] if user_data['username'] else 'âŒ'}\n"
                    f"Ê€á´‡É¢Éªsá´›á´‡Ê€ á´›Éªá´á´‡: {user_data['created_at']}")
        else:
            return f"ğ”ğ¬ğğ« ğ­ğ¨ğ©ğ¢ğ¥ğ¦ğšğğ¢ ğ›ğ® ğˆğƒ ğğ ğšğ¬ğ¢ ğ›ğ¨ğ­ğğš ğ«ğ¨'ğ²ğ±ğšğ­ğğšğ§ ğ¨'ğ­ğ¦ğšğ ğšğ§ ğŸ¤–ğŸ‘¤âŒ"
    else:
        return f"ğ”ğ¬ğğ« ğ­ğ¨ğ©ğ¢ğ¥ğ¦ğšğğ¢ ğ›ğ® ğˆğƒ ğğ ğšğ¬ğ¢ ğ›ğ¨ğ­ğğš ğ«ğ¨'ğ²ğ±ğšğ­ğğšğ§ ğ¨'ğ­ğ¦ğšğ ğšğ§ ğŸ¤–ğŸ‘¤âŒ"
